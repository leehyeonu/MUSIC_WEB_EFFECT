<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Lyric Sync â€“ Santa Tell Me</title>
<style>
  :root{ --bg:#07070b; --fg:#eef4ff; --neon:#00f5ff; --accent:#6aa8ff; }
  html,body{height:100%; margin:0; background: radial-gradient(60% 80% at 50% 20%, #0f1320 0%, #090b12 55%, #07070b 100%); color:var(--fg); font-family: Inter, Pretendard, system-ui, -apple-system, Segoe UI, Roboto;}
  .stage{position:relative; height:100%; overflow:hidden;}
  .topbar{position:absolute; inset:0 0 auto 0; padding: max(12px, env(safe-area-inset-top)) 16px 12px; background: linear-gradient(180deg, rgba(7,7,11,.85) 0%, rgba(7,7,11,0) 100%); z-index:10;}
  audio{ width:100%; accent-color: var(--accent); height:32px; }
  .santa{ position:absolute; left:10px; bottom:18%; font-size: clamp(100px, 20vw, 180px); line-height:1; filter: drop-shadow(0 6px 18px rgba(255,0,64,.35)) drop-shadow(0 0 24px rgba(255,0,64,.25)); animation: bob 2.2s ease-in-out infinite, sway 4.8s ease-in-out infinite; transform-origin: 50% 80%; }
  @keyframes bob { 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-12px) } }
  @keyframes sway { 0%,100%{ rotate:-5deg } 50%{ rotate:5deg } }
  .glass{ position:absolute; left:50%; bottom:6%; transform:translateX(-50%); width:min(96vw, 960px); padding:26px 28px; border-radius:16px; background: rgb(255 255 255 / 7%); backdrop-filter: blur(12px) saturate(120%); -webkit-backdrop-filter: blur(12px) saturate(120%); box-shadow: 0 12px 48px rgba(0,0,0,.45); margin-bottom:max(6px, env(safe-area-inset-bottom)); }
  .lyric{ margin:0; font-size: clamp(30px, 8vw, 48px); font-weight:700; line-height:1.28; letter-spacing:.3px; color:#fff; text-shadow: 0 0 10px #fff, 0 0 24px #fff, 0 0 40px var(--neon), 0 0 80px var(--neon); min-height:1.9em; }
  .gradient{ background: linear-gradient(90deg, var(--accent), var(--neon) 55%, #86ffd6); -webkit-background-clip:text; background-clip:text; color:transparent; }
  .progress{ height:6px; width:100%; background: rgb(255 255 255 / 18%); border-radius:3px; overflow:hidden; margin-top:14px; }
  .progress > i{ display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--neon) 60%, #fff); box-shadow: 0 0 12px var(--neon); transition: width .1s linear; }
  .cursor::after{ content:""; display:inline-block; width:2px; margin-left:4px; background: currentColor; height:1em; animation: blink .7s steps(1) infinite; opacity:.8; }
  @keyframes blink { 50%{ opacity:.2 } }
</style>

<div class="stage">
  <div class="topbar"><audio id="player" controls></audio></div>
  <div class="santa" aria-hidden="true">ðŸŽ…</div>
  <div class="glass">
    <h2 id="lyric" class="lyric gradient cursor">Tap to startâ€¦</h2>
    <div class="progress"><i id="bar"></i></div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const AUDIO_FILE = "song.mp3";  // íŒŒì¼ëª…ë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤.
  const audio = document.getElementById('player');
  const lyricEl = document.getElementById('lyric');
  const barEl = document.getElementById('bar');

  function parseLRC(text){
    const tag = /\[(\d{1,2}):(\d{2})(?:\.(\d{1,3}))?\]/g;
    const out = [];
    for (const raw of text.split(/\r?\n/)){
      const matches = [...raw.matchAll(tag)];
      if (!matches.length) continue;
      const start = matches[matches.length - 1].index + matches[matches.length - 1][0].length;
      const line = raw.slice(start).trim();
      for (const m of matches){
        const mm = +m[1], ss = +m[2], frac = (m[3] || '0').padEnd(3,'0');
        out.push([(mm*60 + ss)*1000 + +frac, line]);
      }
    }
    return out.sort((a,b)=>a[0]-b[0]);
  }

  function typeLine(text){
    lyricEl.textContent = "";
    const chars = [...(text || " ")];
    let i = 0;
    const delay = Math.max(18, Math.min(50, 1000 / Math.max(10, chars.length)));
    const timer = setInterval(() => {
      lyricEl.textContent += chars[i++] || "";
      if (i >= chars.length) clearInterval(timer);
    }, delay);
  }

  // ë°ì´í„° ë¸”ë¡ì—ì„œ LRC ì½ê¸°
  const lrcNode = document.getElementById('lrc');
  const timeline = lrcNode ? parseLRC(lrcNode.textContent) : [];
  let idx = 0, lastIdx = -1, canSync = false;

  // ì˜¤ë””ì˜¤ ì„¤ì • ë° ë©”íƒ€ ì¤€ë¹„ í›„ ë™ê¸°í™”
  audio.src = AUDIO_FILE;
  audio.addEventListener('loadedmetadata', () => { canSync = true; }); // ê¸¸ì´/íƒ€ìž„ë¼ì¸ ì‚¬ìš© ì¤€ë¹„
  // ëª¨ë°”ì¼ ìžë™ìž¬ìƒ ì •ì±… ëŒ€ì‘: ìµœì´ˆ íƒ­ì—ì„œ ìž¬ìƒ
  window.addEventListener('click', () => { if (audio.paused) audio.play().catch(()=>{}); }, { once:true });

  function tick(){
    requestAnimationFrame(tick);
    if (!canSync || !timeline.length || isNaN(audio.duration)) return;
    const pos = audio.currentTime * 1000;
    while (idx + 1 < timeline.length && pos >= timeline[idx + 1][0]) idx++;
    if (lastIdx !== idx){
      lastIdx = idx;
      typeLine(timeline[idx][1] || " ");
    }
    const t = timeline[idx][0];
    const nextT = (idx + 1 < timeline.length) ? timeline[idx+1][0] : (audio.duration*1000 || t+1000);
    barEl.style.width = (Math.max(0, Math.min(1, (pos - t) / Math.max(1, nextT - t))) * 100) + '%';
  }
  tick();
});
</script>


<!-- ì—¬ê¸°ì— ë³¸ì¸ì˜ LRCë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš” -->
<script id="lrc" type="text/plain">
[id: pshzibvw]
[ar: Ariana Grande]
[al: Santa Tell Me - Single]
[ti: Ariana Grande - Santa Tell Me]
[by: ig:@eriksn.egr]

[re: LRC Editor - Android app]
[ve: Version 3.2.6]

[00:00.00]
[00:10.08]Santa, tell me if you're really there
[00:13.83]Don't make me fall in love again
[00:16.56]If he won't be here next year
[00:19.82]Santa, tell me if he really cares
[00:23.84]'Cause I can't give it all away
[00:26.47]If he won't be here next year
[00:30.19]Feeling Christmas all around
[00:32.75]And I'm trying to play it cool
[00:35.29]But it's hard to focus when I see him walkin' 'cross the room
[00:40.41]"Let it Snow" is blasting out
[00:42.66]But I won't get in the mood
[00:45.28]I'm avoiding every mistletoe until I know
[00:49.35]It's true love that he thinks of
[00:53.45]So next Christmas
[00:55.82]I'm not all alone, boy
[01:00.09]Santa, tell me if you're really there
[01:03.97]Don't make me fall in love again
[01:06.52]If he won't be here next year
[01:09.79]Santa, tell me if he really cares
[01:13.91]'Cause I can't give it all away
[01:16.89]If he won't be here next year
[01:20.27]I've been down this road before
[01:23.76]Fell in love on Christmas night (ooh, babe)
[01:26.31]But on New Year's Day, I woke up and he wasn't by my side
[01:31.27]Now I need someone to hold
[01:33.79]Be my fire in the cold (yeah, yeah)
[01:36.36]But it's hard to tell if this is just a fling
[01:39.54]Or if it's true love that he thinks of (of)
[01:44.47]So next Christmas
[01:46.96]I'm not all alone, babe
[01:50.53]Santa, tell me if you're really there
[01:55.10]Don't make me fall in love again
[01:57.50]If he won't be here next year
[02:01.07]Santa, tell me if he really cares
[02:05.04]'Cause I can't give it all away
[02:07.48]If he won't be here next year
[02:12.46]Oh, I wanna have him beside me like oh-oh-oh
[02:17.20]On the 25th by the fire place, oh-oh-oh
[02:21.90]But I don't want a new broken heart
[02:25.56]This year I've got to be smart
[02:29.81]Ooh, baby
[02:30.95](Santa, tell me, Santa, tell me)
[02:34.34]If he will be, if he will be
[02:36.81](Santa, tell me, Santa, tell me)
[02:38.96]Oh-oh-oh
[02:41.22]Santa, tell me if you're really there (Santa, tell me, 'cause I really care)
[02:44.99]Don't make me fall in love again
[02:47.55]If he won't be here next year
[02:50.99]Santa, tell me if he really cares (tell me, tell me, boy)
[02:54.96]'Cause I can't give it all away
[02:57.72]If he won't be here next year
[03:01.27]Santa, tell me if you're really there (tell me, tell me, baby)
[03:05.06]Don't make me fall in love again
[03:07.73]If he won't be here next year (if he won't be, if he won't be here)
[03:11.05]Santa, tell me if he really cares (tell me, do you care?)
[03:14.96]'Cause I can't give it all away
[03:17.46]If he won't be here next year
</script>
